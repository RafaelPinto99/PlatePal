<%# Progress bar %>
<script src="https://kit.fontawesome.com/107807e788.js" crossorigin="anonymous"></script>
<section class= mt-0 >
  <div class="prog_bar bg-white shadow-sm text-center d-flex justify-content-between w-100 rounded-pill">
    <% wizard_steps.each_with_index do |wizzard_step, index| %>
      <% unless index == 4 %>
        <div class="h-100 w-100 py-3 <%= 'bg-success text-white' unless future_step?(wizzard_step) %> <%= 'rounded-button' if index == 0 %> <%= 'rounded-button-last' if index == wizard_steps.count - 2 %>">
          <%= link_to wizzard_step.to_s.humanize, wizard_path(wizzard_step.to_s), class: "text-decoration" %>
        </div>
      <% end %>
    <% end %>
  </div>

  <%# Survey content %>
  <h3 class=" questions mt-5 mb-5"><%= question %></h3>

  <div class="align-center">
    <% if step == :servings  %>
        <%# The servings is not a multiple choice step %>
        <%= simple_form_for(survey, url: wizard_path, method: :put) do |f| %>
            <%= f.input :servings, collection: 1..10, label_html: { class: "font-max"}, input_html: { class: "box-size" }%>
            <div class= "display_buttons mt-2">
              <%= link_to 'Previous', previous_wizard_path, class: " button_finish btn btn-warning text-white rounded-pill me-2" %>
            <%= f.submit 'Finalize', class: "button_finish btn btn-warning text-white rounded-pill float-end" %>
            </div>
        <% end %>
    <% elsif step == :plan_form %>
      <div class= "changed-box">
        <%= simple_form_for @plan do |f| %>
          <%= f.input :title, label_html: { class: "font-bigger"}, input_html: { class: "changed-size" } %>
          <div class= buttons_final_step>
              <%= link_to 'Previous', previous_wizard_path, class: "button_bigger btn btn-warning my-3 text-white rounded-pill" %>
            <%= f.button :submit, class:"button-sized btn btn-warning my-3 text-white rounded-pill" %>
          </div>
      </div>
    <% end %>
    <% else %>
        <%# Render the multiple choice step partial %>
        <%= render "multiple_choice_step", survey: @survey,
                                            wizard_path:,
                                            step:,
                                            answer_options: %>
    <% end %>
  </div>
</section>
